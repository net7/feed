js.utils.registerNamespace("com.gmtplusone.tabs");com.gmtplusone.tabs=function(c,a){var d={target:"#tabs",menu_item:"h3",callbacks:{opened:function(){},closed:function(){}},css:{active_tab_class:"active"}},b={menu_items:[],tabs:[]};this.options=jQuery.extend(true,{},d,a);this.options.menu_ids=[];this.options.target=(typeof c==="string"&&c.length>0)?c:this.options.target;this.init=function(e){this.getMenuItems();this.getTabs();this.createNewNav();if(e){e.call();}};com.gmtplusone.tabs.prototype.getMenuItems=function(){var f=this,e;jQuery(f.options.target+" > "+f.options.menu_item).each(function(g,h){e=jQuery(h);b.menu_items.push(e);f.options.menu_ids.push(e.children().eq(0).attr("href"));e.remove();});};com.gmtplusone.tabs.prototype.getTabs=function(){var f=this,e;jQuery(f.options.target+" > div").each(function(g,h){e=jQuery(h);b.tabs.push(e);});};com.gmtplusone.tabs.prototype.createNewNav=function(){var f={},e=b.menu_items.length-1;jQuery(this.options.target).prepend('<div class="tab-navigation"></div>');f=jQuery(this.options.target+" .tab-navigation");for(e;e>=0;e-=1){f.prepend(b.menu_items[e]);b.menu_items[e].children().eq(0).bind("click",{self:this},this.handleMenuClick);}};com.gmtplusone.tabs.prototype.handleMenuClick=function(h){var g=h.data.self,f=jQuery(this);g.toggleTab(f.attr("href"));};com.gmtplusone.tabs.prototype.toggleTab=function(k){var f,g=b.tabs.length,h=jQuery('a[href="'+k+'"]');for(f=0;f<g;f+=1){var j="#"+b.tabs[f].attr("id"),e=jQuery(j);if(j==k&&e.is(":hidden")){e.slideDown();b.menu_items[f].children().eq(0).addClass(this.options.css.active_tab_class);this.options.callbacks.opened.call(h,j);}else{if(e.is(":visible")){e.slideUp();b.menu_items[f].children().eq(0).removeClass(this.options.css.active_tab_class);this.options.callbacks.closed.call(h,j);}}}};};