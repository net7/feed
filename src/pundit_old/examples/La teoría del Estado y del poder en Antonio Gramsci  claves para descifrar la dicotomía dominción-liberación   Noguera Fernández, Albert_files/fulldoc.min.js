js.utils.registerNamespace("eu.europeana.fulldoc");eu.europeana.fulldoc={tab_priority:["#related-items","#similar-content","#map-view"],init:function(){this.loadComponents();this.addAutoTagHandler();jQuery("#item-save-tag").bind("submit",this.handleSaveTagSubmit);jQuery("#item-save").bind("click",this.handleSaveItemClick);jQuery("#item-embed").bind("click",this.handleEmbedClick);},loadComponents:function(){var a=eu.europeana.fulldoc;js.loader.loadScripts([{name:"external-search-services",file:"external-search-services"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/eu/europeana/"+js.min_directory,callback:function(){eu.europeana.ess.init();}}]);js.loader.loadScripts([{file:"window-open"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/js/"+js.min_directory}]);if(js.debug){js.loader.loadScripts([{name:"jquery-tools",file:"jquery.tools.min.js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/jquery/",dependencies:["jquery-1.4.4.min.js"]}]);js.loader.loadScripts([{name:"flowplayer",file:"flowplayer-3.2.6.min.js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/jquery/",dependencies:["jquery-1.4.4.min.js"]}]);js.loader.loadScripts([{file:"fulldoc-lightbox"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/eu/europeana/"+js.min_directory,dependencies:["jquery-tools","flowplayer"]}]);js.loader.loadScripts([{file:"jwplayer"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/jwplayer/mediaplayer-5.8/"+js.min_directory}]);js.loader.loadScripts([{file:"citation"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/eu/europeana/"+js.min_directory,callback:function(){eu.europeana.citation.init();}}]);}js.loader.loadScripts([{name:"carousel",file:"carousel"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/com/gmtplusone/"+js.min_directory}]);js.loader.loadScripts([{name:"tabs",file:"tabs"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/com/gmtplusone/"+js.min_directory,dependencies:["carousel"],callback:function(){a.addTabs();}}]);js.loader.loadScripts([{name:"truncate-content",file:"truncate-content"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/com/gmtplusone/"+js.min_directory,callback:function(){a.adjustDescription();},dependencies:["tabs"]}]);js.loader.loadScripts([{file:"addthis"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/com/addthis/"+js.min_directory,callback:function(){a.addThis();}}]);js.loader.loadScripts([{name:"microsoft-translator",file:"translator"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/com/microsoft/"+js.min_directory}]);js.loader.loadScripts([{name:"translation-services",file:"translation-services"+js.min_suffix+".js"+js.cache_helper,path:eu.europeana.vars.branding+"/js/eu/europeana/"+js.min_directory,dependencies:["microsoft-translator"],callback:function(){eu.europeana.translation_services.init();}}]);},handleEmbedClick:function(a){a.preventDefault();js.open.openWindow({url:jQuery(this).attr("href"),specs:{width:960,height:600,left:(window.screen.width-960)/2,top:(window.screen.height-600)/2,scrollbars:"yes"}});},addTabs:function(){eu.europeana.tabs={};eu.europeana.tabs.explore=new com.gmtplusone.tabs("#explore-further",{callbacks:{opened:eu.europeana.fulldoc.tabFeedback}});eu.europeana.tabs.explore.init(eu.europeana.fulldoc.addCarousels);},openTab:function(){var f=eu.europeana.fulldoc.tab_priority,b="",j=eu.europeana.tabs.explore.options.menu_ids,c=window.location.hash,e=false,d,h=j.length,g,a=f.length;for(g=0;g<a;g+=1){for(d=0;d<h;d+=1){if(j[d]===f[g]){b=f[g];e=true;break;}}if(e){break;}}if(c){for(d=0;d<h;d+=1){if(j[d]===c){b=c;break;}}}eu.europeana.tabs.explore.toggleTab(b);},tabFeedback:function(a){if(!eu.europeana.fulldoc.similar&&"#similar-content"===a){if(eu.europeana.carousel.similar){eu.europeana.carousel.similar.init();eu.europeana.fulldoc.similar=true;}}if(!eu.europeana.fulldoc.related&&"#related-content"===a){if(eu.europeana.carousel.related){eu.europeana.carousel.related.init();eu.europeana.fulldoc.related=true;}}},addCarousels:function(){eu.europeana.carousel={};if(jQuery("#similar-content").length>0){eu.europeana.carousel.similar=eu.europeana.fulldoc.createCarousel("#similar-content");}if(jQuery("#related-content").length>0){eu.europeana.carousel.related=eu.europeana.fulldoc.createCarousel("#related-content");}},createCarousel:function(a){return new com.gmtplusone.carousel(a,{animation:{arrow_keys_active:false,hover_title:false}});},adjustDescription:function(){var a=new com.gmtplusone.truncate("#item-description",{toggle_html:{more:eu.europeana.vars.msg.more,less:eu.europeana.vars.msg.less,more_class:"more toggle-menu-icon",less_class:"less toggle-menu-icon active"}});a.init(eu.europeana.fulldoc.openTab);},handleSaveTagSubmit:function(c){c.preventDefault();if(jQuery("#item-tag").val()<1){return;}var b={saved_tags_count:0,$saved_tags:jQuery("#saved-tags-count"),success:function(){var d='<span id="save-tag-feedback">'+eu.europeana.vars.msg.saved_tag+"</span>";eu.europeana.ajax.methods.addFeedbackContent(d);eu.europeana.ajax.methods.showFeedbackContainer();b.saved_tags_count=parseInt(b.$saved_tags.html(),10);b.$saved_tags.html(b.saved_tags_count+1);},failure:function(){var d='<span id="save-tag-feedback" class="error">'+eu.europeana.vars.msg.save_tag_failed+"</span>";eu.europeana.ajax.methods.addFeedbackContent(d);eu.europeana.ajax.methods.showFeedbackContainer();}},a={className:"SocialTag",tag:encodeURIComponent(jQuery("#item-tag").val()),europeanaUri:eu.europeana.vars.item.uri};eu.europeana.ajax.methods.user_panel("save",a,b);},handleSaveItemClick:function(c){c.preventDefault();var b={saved_items_count:0,$saved_items:jQuery("#saved-items-count"),success:function(){var d='<span id="save-item-feedback">'+eu.europeana.vars.msg.saved_item+"</span>";eu.europeana.ajax.methods.addFeedbackContent(d);eu.europeana.ajax.methods.showFeedbackContainer();b.saved_items_count=parseInt(b.$saved_items.html(),10);b.$saved_items.html(b.saved_items_count+1);},failure:function(){var d='<span id="save-item-feedback" class="error">'+eu.europeana.vars.msg.save_item_failed+"</span>";eu.europeana.ajax.methods.addFeedbackContent(d);eu.europeana.ajax.methods.showFeedbackContainer();}},a={className:"SavedItem",europeanaUri:eu.europeana.vars.item.uri};eu.europeana.ajax.methods.user_panel("save",a,b);},addAutoTagHandler:function(){var a=this;jQuery("#fields-enrichment a").each(function(b,c){jQuery(c).bind("click",a.handleAutoTagClick);});},handleAutoTagClick:function(b){b.preventDefault();var a=jQuery(this);a.parent().next().slideToggle();if(a.hasClass("active")){a.removeClass("active");}else{a.addClass("active");}},addThis:function(){var a=jQuery('head link[rel="canonical"]').attr("href"),c=jQuery("head title").html(),b=jQuery('head meta[name="description"]').attr("content");window.addthis_config=com.addthis.createConfigObject({pubid:eu.europeana.vars.addthis_pubid,ui_language:"en",data_ga_property:eu.europeana.vars.gaId,data_ga_social:true,data_track_clickback:true,ui_use_css:true});jQuery("#header").append(com.addthis.getToolboxHtml({html_class:"addthis",url:a,title:c,description:b,services:{compact:{},tweet:{count:"vertical"},google_plusone:{count:"true",size:"tall"},facebook_like:{layout:"box_count"}}}));jQuery("#lightbox-addthis").append(com.addthis.getToolboxHtml({html_class:"addthis",url:a,title:c,description:b,services:{compact:{},twitter:{},google_plusone:{count:"false"},facebook_like:{}}}));jQuery(".addthis").hide();com.addthis.init(null,true,false);setTimeout(function(){jQuery(".addthis").fadeIn();},600);}};eu.europeana.fulldoc.init();