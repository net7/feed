js.utils.registerNamespace("eu.europeana.ajax");eu.europeana.ajax=function(a){var c={feedback_container:"#ajax-feedback",feedback_container_html:'<div id="ajax-feedback"></div>',feedback_container_add_to:"#content",feedback_delay_default:700,feedback_delay_max:7000,feedback_delay_incrementor:50},b={ajax_url_prefix:"/"+eu.europeana.vars.portal_name+"/"};this.options=jQuery.extend(true,{},c,a);this.init=function(){this.addFeedbackContainer();b.initialized=true;};eu.europeana.ajax.prototype.user_panel=function(h,e,g){var f=this,d=b.ajax_url_prefix;if(!b.initialized){this.init();}if(!e||"object"!=typeof e){js.console.error("ajax_data was invalid");return;}switch(h){case"save":d+="save.ajax";break;case"remove":d+="remove.ajax";break;default:js.console.error("ajax action was invalid");return;break;}jQuery.ajax({type:"POST",url:d,data:e,dataType:"json",success:function(i){f.feedback("success",e,g,i);},error:function(i){f.feedback("failed",e,g,i);}});};eu.europeana.ajax.prototype.feedback=function(f,d,e,g){if("success"==f&&g.reply.success){e.success();}else{e.failure();}};eu.europeana.ajax.prototype.addFeedbackContainer=function(){if(jQuery(this.options.feedback_container).length<1){jQuery(this.options.feedback_container_add_to).prepend(this.options.feedback_container_html);}};eu.europeana.ajax.prototype.addFeedbackContent=function(d){jQuery(this.options.feedback_container).html(d);};eu.europeana.ajax.prototype.getFeedbackContainerDelay=function(){var e=jQuery(this.options.feedback_container).html(),f=e.length,d=this.options.feedback_delay_incrementor*f+this.options.feedback_delay_default;if(d>this.options.feedback_delay_max){d=this.options.feedback_delay_max;}return parseInt(d,10);};eu.europeana.ajax.prototype.showFeedbackContainer=function(){jQuery(this.options.feedback_container).stop(true).fadeIn().delay(this.getFeedbackContainerDelay()).fadeOut();};};